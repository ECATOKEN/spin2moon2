<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPIN2MOON - Crypto Spin to Win SOL!</title>
    <!-- Google Fonts for Pro Look -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <!-- Chart.js for Professional Wheel -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Solana Connect Library (Free, No Backend) -->
    <script src="https://unpkg.com/solana-connect"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Orbitron', monospace; 
            background: linear-gradient(135deg, #0c0c0c 0%, #1a0033 50%, #000 100%); 
            color: #fff; 
            min-height: 100vh; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            overflow-x: hidden;
        }
        .container { 
            text-align: center; 
            max-width: 800px; 
            padding: 20px; 
            background: rgba(0,0,0,0.8); 
            border-radius: 20px; 
            box-shadow: 0 0 50px rgba(138, 43, 226, 0.5); 
            border: 2px solid #8a2be2; 
        }
        h1 { 
            font-size: 3em; 
            background: linear-gradient(45deg, #ff00ff, #00ffff); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            margin-bottom: 10px; 
            animation: glow 2s ease-in-out infinite alternate; 
        }
        @keyframes glow { from { text-shadow: 0 0 20px #ff00ff; } to { text-shadow: 0 0 30px #00ffff; } }
        p { font-size: 1.2em; margin-bottom: 20px; color: #ccc; }
        #wallet-status { font-size: 1.1em; margin: 10px 0; color: #00ff00; }
        #connect-btn, #spin-btn { 
            padding: 15px 30px; 
            font-size: 1.2em; 
            background: linear-gradient(45deg, #ff00ff, #8a2be2); 
            color: #fff; 
            border: none; 
            border-radius: 50px; 
            cursor: pointer; 
            margin: 10px; 
            transition: all 0.3s; 
            box-shadow: 0 0 20px rgba(255,0,255,0.3); 
        }
        #connect-btn:hover, #spin-btn:hover { transform: scale(1.05); box-shadow: 0 0 30px rgba(255,0,255,0.5); }
        #spin-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        #balance { font-size: 1.5em; color: #ffd700; margin: 20px 0; font-weight: bold; }
        #wheel-container { position: relative; margin: 20px auto; width: 300px; height: 300px; }
        #wheel-canvas { width: 100%; height: 100%; }
        .pointer { position: absolute; top: -10px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 15px solid transparent; border-right: 15px solid transparent; border-top: 30px solid #ffd700; z-index: 10; }
        #result { font-size: 2em; margin: 20px 0; min-height: 50px; }
        #withdraw { display: none; background: linear-gradient(45deg, #00ff00, #32cd32); color: black; padding: 15px 30px; border: none; border-radius: 50px; font-weight: bold; font-size: 1.2em; cursor: pointer; margin: 10px; }
        #leaderboard { margin-top: 30px; background: rgba(0,0,0,0.5); padding: 15px; border-radius: 10px; }
        #leaderboard h3 { margin-bottom: 10px; color: #ffd700; }
        #leaderboard ul { list-style: none; text-align: left; }
        #leaderboard li { padding: 5px; border-bottom: 1px solid #333; color: #ccc; }
        .confetti { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 100; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî• SPIN2MOON üî•</h1>
        <p><b>Her 100$ $SPIN = 1 Spin | 0.8 SOL Jackpot!</b><br>3 SOL birikince √áEK! (Phantom/Solflare vb. baƒüla)</p>
        
        <div id="wallet-status">Wallet: Not Connected</div>
        <button id="connect-btn">CONNECT WALLET</button>
        
        <div id="balance">Bakiye: 0 SOL</div>
        <button id="spin-btn" disabled>SPIN √áEVƒ∞R</button>
        
        <div id="wheel-container">
            <canvas id="wheel-canvas"></canvas>
            <div class="pointer"></div>
        </div>
        
        <div id="result"></div>
        <button id="withdraw">WITHDRAW (3 SOL)</button>
        
        <div id="leaderboard">
            <h3>üèÜ Recent Winners</h3>
            <ul id="winner-list"></ul>
        </div>
    </div>

    <!-- Confetti Canvas for Jackpot -->
    <canvas id="confetti" class="confetti" style="display: none;"></canvas>

    <script>
        // Solana Wallet Connect
        const solConnect = new window.SolanaConnect();
        let walletConnected = false;
        let publicKey = null;
        let balance = 0;
        let spinning = false;
        let chart = null;
        const ctx = document.getElementById('wheel-canvas').getContext('2d');
        const spinBtn = document.getElementById('spin-btn');
        const connectBtn = document.getElementById('connect-btn');
        const walletStatus = document.getElementById('wallet-status');
        const balanceEl = document.getElementById('balance');
        const resultEl = document.getElementById('result');
        const withdrawBtn = document.getElementById('withdraw');
        const winnerList = document.getElementById('winner-list');

        // Wheel Data (Pro Chart.js)
        const wheelData = {
            labels: ['BO≈û', '0.2 SOL', '0.4 SOL', '0.6 SOL', 'JACKPOT 0.8 SOL'],
            datasets: [{
                data: [60, 25, 10, 4, 1],  // Percentages
                backgroundColor: ['#333', '#00ff00', '#ffff00', '#ff9900', '#ff00ff'],
                borderWidth: 2,
                borderColor: '#fff'
            }]
        };
        const config = {
            type: 'doughnut',
            data: wheelData,
            options: {
                rotation: -90,
                circumference: 360,
                cutout: '0%',
                plugins: { legend: { display: false } },
                animation: { animateRotate: true }
            }
        };
        chart = new Chart(ctx, config);

        // Connect Wallet
        connectBtn.addEventListener('click', async () => {
            solConnect.openMenu();
            solConnect.onWalletChange((adapter) => {
                if (adapter) {
                    walletConnected = true;
                    publicKey = adapter.publicKey.toString();
                    walletStatus.innerHTML = `Wallet: ${publicKey.slice(0,4)}...${publicKey.slice(-4)}`;
                    connectBtn.style.display = 'none';
                    spinBtn.disabled = false;
                    loadBalance();  // Load saved balance for this wallet
                } else {
                    walletConnected = false;
                    walletStatus.innerHTML = 'Wallet: Not Connected';
                    connectBtn.style.display = 'block';
                    spinBtn.disabled = true;
                }
            });
        });

        // Load/Save Balance (Wallet-based Storage)
        function loadBalance() {
            if (publicKey) {
                const key = `spinBalance_${publicKey}`;
                balance = parseFloat(localStorage.getItem(key)) || 0;
                updateBalance();
            }
        }
        function saveBalance() {
            if (publicKey) {
                const key = `spinBalance_${publicKey}`;
                localStorage.setItem(key, balance.toString());
            }
        }
        function updateBalance() {
            balanceEl.innerHTML = `Bakiye: ${balance.toFixed(2)} SOL`;
            if (balance >= 3) withdrawBtn.style.display = 'block';
        }

        // Spin Function
        spinBtn.addEventListener('click', () => {
            if (spinning || !walletConnected) return;
            spinning = true;
            spinBtn.disabled = true;
            spinBtn.innerText = '√áEVƒ∞Rƒ∞Lƒ∞YOR...';
            resultEl.innerHTML = '';

            // Random rotation (pro animation)
            const rotations = [1440 + Math.random() * 720, 2160 + Math.random() * 1080];  // 4-8 full spins
            const rotation = rotations[Math.floor(Math.random() * rotations.length)];
            chart.options.rotation = rotation % 360;  // Set final position
            chart.update('none');  // Animate

            setTimeout(() => {
                // Calculate prize based on rotation
                const rand = Math.random();
                let prize = 0;
                let msg = 'BO≈û üò≠';
                let color = '#ff0000';
                if (rand < 0.60) prize = 0;
                else if (rand < 0.85) { prize = 0.2; msg = '0.2 SOL! üé∞'; color = '#00ff00'; }
                else if (rand < 0.95) { prize = 0.4; msg = '0.4 SOL! üöÄ'; color = '#ffff00'; }
                else if (rand < 0.99) { prize = 0.6; msg = '0.6 SOL! üî•'; color = '#ff9900'; }
                else { prize = 0.8; msg = 'JACKPOT 0.8 SOL! ü§ë'; color = '#ff00ff'; showConfetti(); }

                balance += prize;
                saveBalance();
                resultEl.innerHTML = `<span style="color: ${color};">${msg}</span>`;
                updateBalance();
                addFakeWinner(publicKey.slice(0,6) + '...', prize);
                spinning = false;
                spinBtn.disabled = false;
                spinBtn.innerText = 'SPIN √áEVƒ∞R';
            }, 3000);
        });

        // Withdraw (Fake Fail)
        withdrawBtn.addEventListener('click', () => {
            withdrawBtn.innerText = 'Processing...';
            setTimeout(() => {
                const r = Math.random();
                if (r < 0.7) alert('‚ùå TX Failed! Network Congestion. Retry in 1h.');
                else if (r < 0.9) alert('‚è≥ Processing... High Gas. Try Later.');
                else alert('üî¥ Withdraw Disabled Temporarily. Update Coming Soon!');
                withdrawBtn.innerText = 'WITHDRAW (3 SOL)';
            }, 2000);
        });

        // Fake Winners Leaderboard
        function addFakeWinner(wallet, prize) {
            const li = document.createElement('li');
            li.innerHTML = `${wallet} won ${prize} SOL! üéâ`;
            winnerList.insertBefore(li, winnerList.firstChild);
            if (winnerList.children.length > 5) winnerList.removeChild(winnerList.lastChild);
        }
        // Initial Fake Winners
        setInterval(() => {
            const fakeWallets = ['0xMoon...', '0xRich...', '0xDegen...'];
            const fakePrizes = [0.8, 0.6, 0.4];
            if (Math.random() < 0.3) addFakeWinner(fakeWallets[Math.floor(Math.random()*3)], fakePrizes[Math.floor(Math.random()*3)]);
        }, 20000);

        // Confetti for Jackpot (Simple Canvas)
        function showConfetti() {
            const confetti = document.getElementById('confetti');
            confetti.style.display = 'block';
            // Simple confetti logic (particles)
            const cctx = confetti.getContext('2d');
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    cctx.fillStyle = ['#ff00ff', '#00ffff', '#ffd700'][Math.floor(Math.random()*3)];
                    cctx.fillRect(Math.random()*window.innerWidth, Math.random()*window.innerHeight, 10, 10);
                }, i * 50);
            }
            setTimeout(() => confetti.style.display = 'none', 5000);
        }
    </script>
</body>
</html>
